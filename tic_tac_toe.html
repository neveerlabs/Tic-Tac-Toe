<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tic-Tac-Toe â€” Q-Learning RL</title>
<link rel="icon" href="https://img.icons8.com/?size=100&id=7Z7BISZ1HcP1&format=png&color=000000" type="image/png" sizes="any">
<style>
  :root{
    --bg-1: #0a0a0a;
    --bg-2: #121212;
    --accent-1: #1a2a6c;
    --accent-2: #2a1a6c;
    --blue: #4da6ff;
    --red: #ff4d4d;
    --glass: rgba(255,255,255,0.03);
    --muted: rgba(255,255,255,0.12);
    --gold: #FFD700;
    --font-sans: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:
    radial-gradient(1200px 600px at 10% 10%, rgba(29,41,72,0.15), transparent),
    radial-gradient(900px 400px at 90% 90%, rgba(42,26,108,0.12), transparent),
    var(--bg-1); color:#eaeef6; font-family:var(--font-sans);}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;}
  .container{
    width:min(1000px,96vw); max-width:1000px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:18px; padding:20px; display:grid; grid-template-columns:1fr 360px; gap:20px; align-items:start;
    backdrop-filter: blur(8px); box-shadow: 0 6px 30px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);
  }
  .board-wrap{display:flex;flex-direction:column;gap:16px;}
  header.top{display:flex;justify-content:space-between;align-items:center;gap:12px;}
  .score-panel{display:flex;gap:12px;align-items:center;}
  .score{display:flex;gap:10px;align-items:center;padding:8px 12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.03);min-width:120px;justify-content:space-between;}
  .score .label{opacity:0.8;font-size:13px} .score .value{font-weight:700;font-size:18px}
  .controls{display:flex;gap:8px;align-items:center;}
  .btn{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;cursor:pointer;font-size:14px;transition:transform .14s ease, background .14s ease, border-color .14s;display:inline-flex;align-items:center;gap:8px;color:#eaeef6;}
  .btn:hover{ transform:translateY(-3px); border-color: rgba(77,166,255,0.18); background: rgba(255,255,255,0.01)}
  .btn.small{padding:6px 8px;font-size:13px}
  .board{width:100%;aspect-ratio:1;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:12px;padding:12px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));box-shadow: inset 0 -2px 24px rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.03);}
  .cell{background: linear-gradient(180deg, rgba(255,255,255,0.005), rgba(0,0,0,0.2));border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:48px;user-select:none;cursor:pointer;position:relative;transition: transform .12s ease, background .12s ease, box-shadow .12s ease;box-shadow: 0 6px 18px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.02);}
  .cell:hover{ transform: scale(1.03) translateY(-2px); box-shadow: 0 10px 26px rgba(0,0,0,0.7) }
  .cell.disabled{ cursor:not-allowed; opacity:0.9; transform:none }
  .cell.x{ color: var(--red); font-weight:800; text-shadow: 0 2px 12px rgba(255,77,77,0.08) }
  .cell.o{ color: var(--blue); font-weight:800; text-shadow: 0 2px 12px rgba(77,166,255,0.08) }
  .marker{display:inline-block;transform: scale(0.2) rotate(-6deg);opacity:0;animation: pop-in .18s cubic-bezier(.2,.85,.3,1) forwards;}
  @keyframes pop-in{ to { transform: scale(1) rotate(0deg); opacity:1; } }
  .cell.win { box-shadow: 0 0 28px 6px rgba(77,166,255,0.08), 0 8px 32px rgba(0,0,0,0.6); transform: scale(1.05); animation: glow 1.2s infinite alternate; }
  @keyframes glow{ to { box-shadow: 0 0 48px 10px rgba(77,166,255,0.12), 0 10px 40px rgba(0,0,0,0.6); } }
  .side{display:flex;flex-direction:column;gap:12px;align-items:stretch;}
  .panel{padding:14px;border-radius:12px;background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid rgba(255,255,255,0.03);}
  .panel h3{ margin:0 0 8px 0; font-size:16px } .panel p{ margin:0; font-size:13px; color:rgba(255,255,255,0.78) }
  .stat-list{ display:flex; gap:8px; align-items:center; justify-content:space-between; margin-top:8px }
  .stat{ font-weight:700; font-size:15px } .small-muted{ font-size:12px; color:rgba(255,255,255,0.5) }
  .overlay{ position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60; backdrop-filter: blur(6px); background: linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.72)); }
  .overlay.active{ display:flex } .result-card{ width:min(720px,92vw); padding:28px; border-radius:16px; text-align:center; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); box-shadow: 0 12px 48px rgba(2,6,23,0.78); }
  .result-card h1{ margin:0; font-size:44px } .crown{ font-size:48px; display:inline-block; margin-right:10px; animation: crown-bounce .9s ease infinite alternate; } @keyframes crown-bounce { to { transform: translateY(-8px) rotate(-6deg); } }
  .result-card p{ margin:8px 0 16px 0; font-size:16px } .result-actions{ display:flex; gap:10px; justify-content:center; margin-top:14px } .glow{ box-shadow: 0 8px 44px rgba(77,166,255,0.14), inset 0 -4px 12px rgba(0,0,0,0.25); }
  @media (max-width:880px){ .container{ grid-template-columns: 1fr; } .side{ order:2 } }
  #particle-canvas{ position:fixed; inset:0; pointer-events:none; z-index:55; }
  .tiny{ font-size:12px; opacity:0.9; }
  .progress{ height:10px; background:rgba(255,255,255,0.03); border-radius:6px; overflow:hidden; margin-top:8px; }
  .progress > i{ display:block; height:100%; background:linear-gradient(90deg,var(--blue), #9be1ff); width:0%; transition:width .12s linear; }
  .social-links { display: flex; gap: 8px; justify-content: center; margin-top: 12px; }
  .social-icon { background: transparent; border: none; cursor: pointer; transition: transform .14s ease; }
  .social-icon:hover { transform: scale(1.1); }
  .modal-overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(8px); background: rgba(2, 6, 23, 0.75); padding: 20px; }
  .modal-overlay.active { display: flex; }
  .modal-content { width: min(680px, 92vw); max-height: 85vh; background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015)); border-radius: 18px; padding: 0; border: 1px solid rgba(255,255,255,0.06); box-shadow: 0 12px 48px rgba(2,6,23,0.85); overflow: hidden; animation: modalSlideIn 0.3s cubic-bezier(0.2, 0.85, 0.3, 1); }
  @keyframes modalSlideIn { from { opacity: 0; transform: translateY(-30px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
  .modal-header { padding: 20px 24px; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-between; align-items: center; background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent); }
  .modal-header h2 { margin: 0; font-size: 20px; color: #eaeef6; }
  .modal-close { background: transparent; border: 1px solid rgba(255,255,255,0.08); width: 32px; height: 32px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s; color: #eaeef6; font-size: 20px; line-height: 1; }
  .modal-close:hover { background: rgba(255,77,77,0.1); border-color: rgba(255,77,77,0.3); transform: scale(1.05); }
  .modal-body { padding: 24px; max-height: calc(85vh - 80px); overflow-y: auto; color: rgba(255,255,255,0.85); font-size: 14px; line-height: 1.7; }
  .modal-body::-webkit-scrollbar { width: 8px; }
  .modal-body::-webkit-scrollbar-track { background: rgba(255,255,255,0.02); border-radius: 4px; }
  .modal-body::-webkit-scrollbar-thumb { background: rgba(77,166,255,0.3); border-radius: 4px; }
  .modal-body::-webkit-scrollbar-thumb:hover { background: rgba(77,166,255,0.5); }
  .modal-body h3 { color: #4da6ff; margin: 20px 0 10px 0; font-size: 16px; }
  .modal-body p { margin: 12px 0; opacity: 0.9; }
  .modal-body ul { padding-left: 20px; }
  .modal-body li { margin: 8px 0; }
  .modal-body a { color: #4da6ff; text-decoration: none; transition: opacity 0.2s; }
  .modal-body a:hover { opacity: 0.7; text-decoration: underline; }
  .modal-body code { background: rgba(255,255,255,0.05); padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; color: #9be1ff; }
  .modal-body pre { background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; overflow-x: auto; border: 1px solid rgba(255,255,255,0.05); }
@media (max-width: 768px) { .modal-content { max-height: 90vh; } .modal-header { padding: 16px 20px; } .modal-header h2 { font-size: 18px; } .modal-body { padding: 20px; font-size: 13px; } }
</style>
</head>
<body>
<div class="wrap">
  <div class="container" role="application" aria-label="Tic Tac Toe RL Updated">
    <div class="board-wrap">
      <header class="top">
        <div class="score-panel">
          <div class="score" id="playerScoreBox" title="Player (You)">
            <div style="display:flex;gap:8px;align-items:center">
              <img src="https://img.icons8.com/ios/50/ffffff/user.png" alt="Player" width="24" height="24">
              <div>
                <div class="label">Player</div>
                <div class="value" id="playerScore">0</div>
              </div>
            </div>
          </div>
          <div class="score" id="aiScoreBox" title="AI">
            <div style="display:flex;gap:8px;align-items:center">
              <img src="https://img.icons8.com/ios/50/ffffff/artificial-intelligence.png?referrer=grok.com" alt="AI" width="24" height="24">
              <div>
                <div class="label">AI</div>
                <div class="value" id="aiScore">0</div>
              </div>
            </div>
          </div>
        </div>
        <div class="controls">
          <button class="btn small" id="resetScoreBtn" title="Reset skor">
            <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M14.8284 12L20.4142 6.41421M17.8284 6H7.17152M6 6H7.17152M6 6V7.17152M9.17152 12L3.58575 17.5858M6 18V16.8284M6.34312 16.1716L10.0001 12.0001L6.34312 16.1716ZM17.6568 7.82843L14 12L17.6568 7.82843Z"/></svg> Reset Skor</button>
          <button class="btn small" id="homeBtn" title="Kembali ke beranda">
            <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M3 12L5 10M5 10L12 3L19 10M5 10V21C5 21.5523 5.44772 22 6 22H9M19 10L21 12M19 10V21C19 21.5523 18.5523 22 18 22H15M9 22C9 21.4477 9.44772 21 10 21H14C14.5523 21 15 21.4477 15 22M9 22V17C9 16.4477 9.44772 16 10 16H14C14.5523 16 15 16.4477 15 17V22"/></svg> Home</button>
        </div>
      </header>
      <main>
        <div class="board" id="board" role="grid" aria-label="Board"></div>
      </main>
      <footer style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
        <div style="display:flex;gap:8px;align-items:center">
          <div class="small-muted">Giliran: <strong id="turnLabel">Player (X)</strong></div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <div class="small-muted">Epsilon: <strong id="epsilonLabel">0.20</strong></div>
        </div>
      </footer>
    </div>
    <aside class="side">
      <div class="panel">
        <h3>AI Learning (Q-Learning)</h3>
        <p class="tiny">AI memeriksa kemenangan satu langkah serta mempelajari strategi melalui data Q-Learning.</p>
        <div class="stat-list">
          <div>
            <div class="small-muted">Q-States</div>
            <div class="stat" id="qStatesCount">0</div>
          </div>
          <div>
            <div class="small-muted">Version</div>
            <div class="stat">v4.4.2.8</div>
          </div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px">
          <button class="btn" id="trainBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M12 3L3 21H21L12 3Z"/></svg> +1000</button>
          <button class="btn" id="train5000Btn">
            <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M12 3L3 21H21L12 3Z"/></svg> +5000</button>
          <button class="btn" id="train50kBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M12 3L3 21H21L12 3Z"/></svg> +50k</button>
        </div>
        <div class="progress" id="trainProgress" style="display:none"><i></i></div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="btn" id="exportBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M12 4V20M12 20L18 14M12 20L6 14"/></svg> Export Q
          </button>
          <button class="btn" id="importBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M12 20V4M12 4L18 10M12 4L6 10"/></svg> Import Q
          </button>
          <button class="btn" id="clearQBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12Z"/></svg> Reset Memory</button>
        </div>
      </div>
      <div class="panel">
        <h3>Parameters</h3>
        <p class="small-muted">Ubah parameter untuk eksperimen. Gunakan default untuk balancing eksplorasi & berlatih lebih cepat.</p>
        <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
          <label class="small-muted">Epsilon (explore): <strong id="epsVal">0.20</strong></label>
          <input id="epsilonRange" type="range" min="0" max="0.5" step="0.01" value="0.20" />
          <label class="small-muted">Learning Rate: <strong id="lrVal">0.10</strong></label>
          <input id="lrRange" type="range" min="0.01" max="0.5" step="0.01" value="0.10" />
          <label class="small-muted">Discount (gamma): <strong id="gammaVal">0.90</strong></label>
          <input id="gammaRange" type="range" min="0.5" max="0.99" step="0.01" value="0.90" />
          <label class="small-muted"><input type="checkbox" id="decayEps" checked /> Decay epsilon during training</label>
        </div>
      </div>
      <div class="panel">
        <h3>Info & Tips</h3>
        <p class="tiny" style="margin-top:8px">Setup AI unbeatable: train 50k+ games. AI akan force seri kalau AI terpojok dan hampir kalah!</p>
        <div class="social-links">
          <a href="https://wa.me/+628561765372" target="_blank" class="social-icon" title="WhatsApp">
            <img src="https://img.icons8.com/ios/50/ffffff/whatsapp.png" alt="WhatsApp" width="24" height="24">
          </a>
          <a href="https://instagram.com/neveerlabs" target="_blank" class="social-icon" title="Instagram">
            <img src="https://img.icons8.com/ios/50/ffffff/instagram-new.png" alt="Instagram" width="24" height="24">
          </a>
          <a href="https://www.facebook.com/neveerlabs" target="_blank" class="social-icon" title="Facebook">
            <img src="https://img.icons8.com/ios/50/ffffff/facebook-f.png" alt="Facebook" width="24" height="24">
          </a>
          <a href="https://github.com/neveerlabs" target="_blank" class="social-icon" title="GitHub">
            <img src="https://img.icons8.com/ios/50/ffffff/github--v1.png" alt="GitHub" width="24" height="24">
          </a>
          <a href="https://t.me/Neverlabs" target="_blank" class="social-icon" title="Telegram">
            <img src="https://img.icons8.com/ios/50/ffffff/telegram-app.png" alt="Telegram" width="24" height="24">
          </a>
          <a href="mailto:userlinuxorg@gmail.com" target="_blank" class="social-icon" title="Email">
            <img src="https://img.icons8.com/ios/50/ffffff/gmail-new.png" alt="Email" width="24" height="24">
          </a>
        </div>
        <p style="text-align:center; margin-top:16px; font-size:11px; opacity:0.7;">&copy; 2026 Neverlabs â€¢ <a href="javascript:void(0)" onclick="openLicenseModal()" style="color:#4da6ff; text-decoration:none; cursor:pointer; transition:opacity 0.2s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.7'">MIT License</a> â€¢ <a href="javascript:void(0)" onclick="openPrivacyModal()" style="color:#4da6ff; text-decoration:none; cursor:pointer; transition:opacity 0.2s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.7'">Privacy Policy</a>
        </p>
      </div>
    </aside>
  </div>
</div>
<canvas id="particle-canvas"></canvas>
<div class="overlay" id="overlay" role="dialog" aria-modal="true">
  <div class="result-card" id="resultCard">
    <div style="display:flex;align-items:center;justify-content:center">
      <div class="crown" id="crownIcon" style="display:none">ðŸ‘‘</div>
      <h1 id="resultTitle">You Win!</h1>
    </div>
    <p id="resultMsg">Keterangan hasil pertandingan</p>
    <div class="result-actions">
      <button class="btn glow" id="playAgainBtn">
        <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M14.8284 12L20.4142 6.41421M17.8284 6H7.17152M6 6H7.17152M6 6V7.17152M9.17152 12L3.58575 17.5858M6 18V16.8284M6.34312 16.1716L10.0001 12.0001L6.34312 16.1716ZM17.6568 7.82843L14 12L17.6568 7.82843Z"/></svg> Play Again</button>
      <button class="btn" id="homeBtn2">
        <svg width="16" height="16" viewBox="0 0 24 24" stroke="#eaeef6" stroke-width="2" fill="none"><path d="M3 12L5 10M5 10L12 3L19 10M5 10V21C5 21.5523 5.44772 22 6 22H9M19 10L21 12M19 10V21C19 21.5523 18.5523 22 18 22H15M9 22C9 21.4477 9.44772 21 10 21H14C14.5523 21 15 21.4477 15 22M9 22V17C9 16.4477 9.44772 16 10 16H14C14.5523 16 15 16.4477 15 17V22"/></svg> Home</button>
    </div>
  </div>
</div>
<!-- Modal License -->
<div class="modal-overlay" id="licenseModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>MIT License</h2>
      <button class="modal-close" onclick="closeLicenseModal()">Ã—</button>
    </div>
    <div class="modal-body">
      <h3>MIT License</h3>
      <p><strong>Copyright Â© 2026 Neverlabs</strong></p>
      
      <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
      
      <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
      
      <p><strong>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</strong></p>
      
      <p>IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
      
      <h3>What This Means</h3>
      <ul>
        <li>You can use this software for free</li>
        <li>You can modify and distribute it</li>
        <li>You can use it commercially</li>
        <li>You can sublicense it</li>
        <li>You must include the license and copyright notice</li>
        <li>The software is provided "as is" without warranty</li>
      </ul>
      
      <p style="margin-top:20px; padding-top:20px; border-top:1px solid rgba(255,255,255,0.05); opacity:0.6; font-size:12px;">
        For more information, visit <a href="https://opensource.org/licenses/MIT" target="_blank">opensource.org/licenses/MIT</a>
      </p>
    </div>
  </div>
</div>
<div class="modal-overlay" id="privacyModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Privacy Policy</h2>
      <button class="modal-close" onclick="closePrivacyModal()">Ã—</button>
    </div>
    <div class="modal-body">
      <h3>Privacy Policy for Tic-Tac-Toe AI</h3>
      <p><strong>Last Updated:</strong> January 19, 2026</p>
      
      <h3>1. Introduction</h3>
      <p>Neverlabs ("we", "our", "us") is committed to protecting your privacy. This Privacy Policy explains how we handle your information when you use our Tic-Tac-Toe AI application.</p>
      
      <h3>2. Information We Collect</h3>
      <p>Our application operates entirely in your browser and does NOT collect, transmit, or store any personal information on external servers.</p>
      
      <h3>3. Local Storage</h3>
      <p>The application uses browser <code>localStorage</code> to save:</p>
      <ul>
        <li><strong>Game Scores:</strong> Your win/loss statistics</li>
        <li><strong>Q-Learning Table:</strong> AI training data</li>
        <li><strong>Game Parameters:</strong> Your epsilon, learning rate, and discount factor settings</li>
      </ul>
      <p>This data remains on YOUR device only and is never transmitted to our servers or any third party.</p>
      
      <h3>4. Third-Party Services</h3>
      <p>We use the following third-party services:</p>
      <ul>
        <li><strong>Icons8:</strong> For UI icons (loaded from their CDN)</li>
        <li><strong>GitHub Pages:</strong> For hosting (if applicable)</li>
      </ul>
      <p>These services may collect standard web analytics data. Please refer to their privacy policies for more information.</p>
      
      <h3>5. Cookies</h3>
      <p>We do NOT use cookies. All data is stored in browser localStorage.</p>
      
      <h3>6. Data Security</h3>
      <p>Since all data is stored locally on your device, you have full control over it. You can clear your data at any time by:</p>
      <ul>
        <li>Clicking the "Reset Memory" button in the app</li>
        <li>Clearing your browser's localStorage</li>
        <li>Clearing your browser cache</li>
      </ul>
      
      <h3>7. Children's Privacy</h3>
      <p>Our application does not collect any personal information from anyone, including children under 13.</p>
      
      <h3>8. Your Rights</h3>
      <p>You have the right to:</p>
      <ul>
        <li>Access your data (via browser developer tools)</li>
        <li>Delete your data (via Reset buttons or browser settings)</li>
        <li>Export your data (via Export Q-table feature)</li>
      </ul>
      
      <h3>9. Changes to This Policy</h3>
      <p>We may update this Privacy Policy from time to time. Changes will be posted on this page with an updated "Last Updated" date.</p>
      
      <h3>10. Contact Us</h3>
      <p>If you have questions about this Privacy Policy, contact us at:</p>
      <ul>
        <li><strong>Email:</strong> <a href="mailto:userlinuxorg@gmail.com">userlinuxorg@gmail.com</a></li>
        <li><strong>WhatsApp:</strong> <a href="https://wa.me/628561765372" target="_blank">+62 856-1765-372</a></li>
        <li><strong>Instagram:</strong> <a href="https://instagram.com/neveerlabs" target="_blank">@neveerlabs</a></li>
        <li><strong>Facebook:</strong> <a href="https://www.facebook.com/neveerlabs" target="_blank">Neverlabs</a></li>
        <li><strong>Telegram:</strong> <a href="https://t.me/Neverlabs" target="_blank">@Neverlabs</a></li>
        <li><strong>GitHub:</strong> <a href="https://github.com/neveerlabs" target="_blank">@neveerlabs</a></li>
      </ul>
      
      <p style="margin-top:20px; padding-top:20px; border-top:1px solid rgba(255,255,255,0.05); opacity:0.6; font-size:12px;">
        By using this application, you agree to this Privacy Policy.
      </p>
    </div>
  </div>
</div>
<script>
const STORAGE_KEY_Q = 'ttt_qtable_v3';
const STORAGE_KEY_SCORE = 'ttt_scores_v3';

let EPSILON = 0.20;
let LEARNING_RATE = 0.10;
let DISCOUNT = 0.90;

const PLAYER = 'X';
const AI = 'O';

let boardState = Array(9).fill('_');
let gameActive = true;
let playerTurn = true;
let playerScore = 0, aiScore = 0;
let qTable = {};
let moveHistory = [];
let trainingRunning = false;

function openLicenseModal() {
  document.getElementById('licenseModal').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closeLicenseModal() {
  document.getElementById('licenseModal').classList.remove('active');
  document.body.style.overflow = 'auto';
}

function openPrivacyModal() {
  document.getElementById('privacyModal').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function closePrivacyModal() {
  document.getElementById('privacyModal').classList.remove('active');
  document.body.style.overflow = 'auto';
}

// Close modal when clicking outside
document.addEventListener('click', (e) => {
  if (e.target.classList.contains('modal-overlay')) {
    closeLicenseModal();
    closePrivacyModal();
  }
});

// Close modal on ESC key
window.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    closeLicenseModal();
    closePrivacyModal();
  }
});

const boardEl = document.getElementById('board');
const playerScoreEl = document.getElementById('playerScore');
const aiScoreEl = document.getElementById('aiScore');
const qStatesCountEl = document.getElementById('qStatesCount');
const overlay = document.getElementById('overlay');
const resultTitle = document.getElementById('resultTitle');
const resultMsg = document.getElementById('resultMsg');
const crownIcon = document.getElementById('crownIcon');
const trainBtn = document.getElementById('trainBtn');
const train5000Btn = document.getElementById('train5000Btn');
const train50kBtn = document.getElementById('train50kBtn');
const trainProgress = document.getElementById('trainProgress');
const trainProgressBar = trainProgress.querySelector('i');
const resetScoreBtn = document.getElementById('resetScoreBtn');
const homeBtn = document.getElementById('homeBtn');
const playAgainBtn = document.getElementById('playAgainBtn');
const homeBtn2 = document.getElementById('homeBtn2');
const clearQBtn = document.getElementById('clearQBtn');
const exportBtn = document.getElementById('exportBtn');
const importBtn = document.getElementById('importBtn');

const epsilonRange = document.getElementById('epsilonRange');
const lrRange = document.getElementById('lrRange');
const gammaRange = document.getElementById('gammaRange');
const epsVal = document.getElementById('epsVal');
const lrVal = document.getElementById('lrVal');
const gammaVal = document.getElementById('gammaVal');
const epsilonLabel = document.getElementById('epsilonLabel');
const decayEpsCheckbox = document.getElementById('decayEps');
const particleCanvas = document.getElementById('particle-canvas');
const pcCtx = particleCanvas.getContext('2d');
let particles=[];
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

loadQTable();
loadScores();
renderBoard();
updateUI();
attachEvents();

function renderBoard(){
  boardEl.innerHTML = '';
  boardState.forEach((v,i)=>{
    const cell = document.createElement('div');
    cell.className = 'cell' + (v==='X' ? ' x' : v==='O' ? ' o' : '');
    cell.dataset.index = i;
    cell.setAttribute('role','button');
    cell.setAttribute('aria-label','Cell ' + (i+1));
    if(v !== '_'){
      const sp = document.createElement('span'); sp.className='marker'; sp.textContent = v;
      cell.appendChild(sp); cell.classList.add('disabled');
    } else {
      cell.innerHTML = '';
      cell.classList.remove('disabled');
    }
    cell.addEventListener('click', onCellClick);
    boardEl.appendChild(cell);
  });
}

function highlightWinning(indices){
  indices.forEach(i=>{
    const el = boardEl.querySelector(`.cell[data-index="${i}"]`);
    if(el) el.classList.add('win');
  });
}

function clearWinningHighlights(){
  boardEl.querySelectorAll('.cell.win').forEach(el=>el.classList.remove('win'));
}

function updateUI(){
  playerScoreEl.textContent = playerScore;
  aiScoreEl.textContent = aiScore;
  qStatesCountEl.textContent = Object.keys(qTable).length;
  document.getElementById('epsVal').textContent = EPSILON.toFixed(2);
  document.getElementById('lrVal').textContent = LEARNING_RATE.toFixed(2);
  document.getElementById('gammaVal').textContent = DISCOUNT.toFixed(2);
  document.getElementById('epsilonLabel').textContent = EPSILON.toFixed(2);
  document.getElementById('turnLabel').textContent = playerTurn ? 'Player (X)' : 'AI (O)';
}

function attachEvents(){
  resetScoreBtn.addEventListener('click', ()=>{ playerScore=0; aiScore=0; saveScores(); updateUI(); });
  homeBtn.addEventListener('click', ()=>location.reload());
  homeBtn2.addEventListener('click', ()=>location.reload());
  playAgainBtn.addEventListener('click', ()=>{ hideResult(); newRound(); });

  clearQBtn.addEventListener('click', ()=>{ if(confirm('Reset AI memory?')){ qTable={}; saveQTable(); updateUI(); alert('AI memory cleared.'); } });

  exportBtn.addEventListener('click', ()=>{ const data = JSON.stringify(qTable); const blob = new Blob([data], {type:'application/json'}); const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='qtable_ttt_v3.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url); });

  importBtn.addEventListener('click', ()=>{
    const input=document.createElement('input'); input.type='file'; input.accept='application/json';
    input.onchange = e=>{
      const f = e.target.files[0]; if(!f) return;
      const reader = new FileReader();
      reader.onload = ev=>{
        try{
          const obj = JSON.parse(ev.target.result);
          if(typeof obj === 'object' && obj !== null){ qTable = obj; saveQTable(); updateUI(); alert('Imported Q-table.'); } else throw new Error('Invalid format');
        }catch(err){ alert('Import failed: ' + err.message); }
      }; reader.readAsText(f);
    };
    input.click();
  });

  epsilonRange.addEventListener('input', e=>{ EPSILON = parseFloat(e.target.value); updateUI(); });
  lrRange.addEventListener('input', e=>{ LEARNING_RATE = parseFloat(e.target.value); updateUI(); });
  gammaRange.addEventListener('input', e=>{ DISCOUNT = parseFloat(e.target.value); updateUI(); });

  trainBtn.addEventListener('click', ()=>{ if(!trainingRunning) runTraining(1000); else alert('Training sedang berjalan'); });
  train5000Btn.addEventListener('click', ()=>{ if(!trainingRunning) runTraining(5000); else alert('Training sedang berjalan'); });
  train50kBtn.addEventListener('click', ()=>{ if(!trainingRunning) runTraining(50000); else alert('Training sedang berjalan'); });
}

function onCellClick(e){
  if(!gameActive || !playerTurn) return;
  const idx = parseInt(e.currentTarget.dataset.index,10);
  if(boardState[idx] !== '_') return;
  makeMove(idx, PLAYER);
}

function makeMove(idx, symbol){
  if(!gameActive) return;
  if(boardState[idx] !== '_') return;
  boardState[idx] = symbol;
  renderBoard();
  const res = checkWinner(boardState);
  if(res.winner){
    gameActive=false;
    handleGameOver(res.winner, res.indices);
    return;
  } else if(res.winner === 'draw'){
    gameActive=false;
    handleGameOver('draw');
    return;
  }
  playerTurn = (symbol !== PLAYER);
  updateUI();
  if(!playerTurn){
    setTimeout(()=> makeAIMove(), 200);
  }
}

function makeAIMove(){
  const state = stateStr(boardState);
  let avail = availableMoves(boardState);
  if(avail.length === 0) return;

  const winningIdx = findWinningMove(boardState, AI);
  if(winningIdx !== -1){
    recordAIMoveAndApply(state, winningIdx);
    return;
  }
  const blockIdx = findWinningMove(boardState, PLAYER);
  if(blockIdx !== -1){
    recordAIMoveAndApply(state, blockIdx);
    return;
  }

  if(!qTable[state]) qTable[state] = {};
  avail.forEach(a=> { if(qTable[state][a] === undefined) qTable[state][a] = 0.0; });

  const safeAvail = avail.filter(a => !wouldGiveWin(boardState, a, PLAYER));

  let chosenAvail = safeAvail.length > 0 ? safeAvail : avail;

  let chosen;
  if(Math.random() < EPSILON){
    chosen = chosenAvail[Math.floor(Math.random()*chosenAvail.length)];
  } else {
    let maxQ = -Infinity; let best = [];
    chosenAvail.forEach(a=>{
      const q = qTable[state][a] ?? 0.0;
      if(q > maxQ){ maxQ = q; best = [a]; }
      else if(q === maxQ){ best.push(a); }
    });
    chosen = best.length ? best[Math.floor(Math.random()*best.length)] : chosenAvail[Math.floor(Math.random()*chosenAvail.length)];
  }

  recordAIMoveAndApply(state, chosen);
}

function wouldGiveWin(board, action, opponent){
  const sim = board.slice();
  sim[action] = AI;
  return findWinningMove(sim, opponent) !== -1;
}

function recordAIMoveAndApply(state, actionIdx){
  boardState[actionIdx] = AI;
  const next = stateStr(boardState);
  moveHistory.push({state, action: actionIdx, nextState: next});
  renderBoard();

  const res = checkWinner(boardState);
  if(res.winner){
    gameActive=false;
    handleGameOver(res.winner, res.indices);
    return;
  } else if(res.winner === 'draw'){
    gameActive=false;
    handleGameOver('draw');
    return;
  }
  playerTurn = true;
  updateUI();
}

function findWinningMove(board, symbol){
  const avail = availableMoves(board);
  for(const idx of avail){
    const copy = board.slice(); copy[idx]=symbol;
    const r = checkWinner(copy);
    if(r.winner === symbol) return idx;
  }
  return -1;
}

function availableMoves(board){ const arr=[]; board.forEach((v,i)=>{ if(v==='_' ) arr.push(i); }); return arr; }
function stateStr(board){ return board.join(''); }

function updateQValues(finalReward){
  let reward = finalReward === 1 ? 1 : finalReward === -1 ? -1 : 0.1;
  for(let i=moveHistory.length-1; i>=0; i--){
    const {state, action, nextState} = moveHistory[i];
    if(!qTable[state]) qTable[state] = {};
    if(qTable[state][action] === undefined) qTable[state][action] = 0.0;
    const currentQ = qTable[state][action];

    let maxNextQ = 0;
    if(qTable[nextState]){
      const vals = Object.values(qTable[nextState]);
      if(vals.length) maxNextQ = Math.max(...vals);
    }
    const target = reward + (DISCOUNT * maxNextQ);
    const newQ = currentQ + (LEARNING_RATE * (target - currentQ));
    qTable[state][action] = newQ;
    reward = 0;
  }
  moveHistory = [];
  saveQTable();
}

function handleGameOver(result, winIndices=[]){
  clearWinningHighlights();
  if(result === PLAYER){
    playerScore++; saveScores();
    highlightWinning(winIndices);
    showResult('You Win!', 'Kamu menang! AI menerima -1 reward.', 'win');
    updateQValues(-1); // AI lost
  } else if(result === AI){
    aiScore++; saveScores();
    highlightWinning(winIndices);
    showResult('You Lose!', 'Kamu kalah! AI menerima +1 reward.', 'lose');
    updateQValues(1);
    startParticles();
  } else {
    showResult('Draw!', 'Hasil pertandingan seri! AI menerima +0.1 reward.', 'draw');
    updateQValues(0);
  }
  updateUI();
}

function showResult(title, msg, type){
  overlay.classList.add('active');
  resultTitle.textContent = title;
  resultMsg.textContent = msg;
  crownIcon.style.display = (type === 'win' ? 'inline-block' : 'none');
}
function hideResult(){
  overlay.classList.remove('active');
}

function newRound(){
  boardState = Array(9).fill('_');
  gameActive = true;
  playerTurn = true;
  moveHistory = [];
  clearWinningHighlights();
  renderBoard();
  updateUI();
}

function saveQTable(){
  try{ localStorage.setItem(STORAGE_KEY_Q, JSON.stringify(qTable)); }catch(err){ console.warn('Save Q failed', err); }
}
function loadQTable(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY_Q);
    if(raw){ const obj = JSON.parse(raw); if(typeof obj === 'object' && obj !== null){ qTable = obj; return; } }
  }catch(err){ console.warn('Load Q failed', err); }
  qTable = {};
}
function saveScores(){ try{ localStorage.setItem(STORAGE_KEY_SCORE, JSON.stringify({player:playerScore, ai:aiScore})); }catch(e){} }
function loadScores(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY_SCORE);
    if(raw){ const s = JSON.parse(raw); playerScore = s.player || 0; aiScore = s.ai || 0; return; }
  }catch(e){}
  playerScore = 0; aiScore = 0;
}

async function runTraining(totalGames){
  trainingRunning = true;
  trainProgress.style.display = 'block';
  trainProgressBar.style.width = '0%';
  const originalEps = EPSILON;
  const decay = decayEpsCheckbox.checked;
  const chunk = 500;
  for(let i=0; i<totalGames; i+=chunk){
    const upto = Math.min(totalGames, i + chunk);
    for(let g=i; g<upto; g++){
      if(decay) EPSILON = Math.max(0.01, originalEps * (1 - (g / totalGames)));
      await simulateOneGame();
    }
    trainProgressBar.style.width = Math.round((upto / totalGames) * 100) + '%';
    qStatesCountEl.textContent = Object.keys(qTable).length;
    await new Promise(r => requestAnimationFrame(r));
  }
  EPSILON = originalEps;
  saveQTable();
  trainingRunning = false;
  trainProgress.style.display = 'none';
  updateUI();
  alert('Training selesai: ' + totalGames + ' games. Q-states: ' + Object.keys(qTable).length);
}

function simulateOneGame(){
  return new Promise(resolve=>{
    let simBoard = Array(9).fill('_');
    let simPlayerTurn = true;
    let simMoveHistory = [];
    let simActive = true;

    while(simActive){
      if(simPlayerTurn){
        let chosen = findWinningMoveSim(simBoard, PLAYER);
        if(chosen === -1) chosen = findWinningMoveSim(simBoard, AI);
        if(chosen === -1){
          const av = availableMoves(simBoard);
          chosen = av[Math.floor(Math.random()*av.length)];
        }
        simBoard[chosen] = PLAYER;
        const res = checkWinner(simBoard);
        if(res.winner){
          applySimUpdates(simMoveHistory, res.winner === AI ? 1 : (res.winner === PLAYER ? -1 : 0.1));
          simActive=false; break;
        }
        simPlayerTurn = false;
      } else {
        const curState = simBoard.join('');
        let avail = availableMoves(simBoard);
        if(avail.length === 0){ applySimUpdates(simMoveHistory, 0.1); simActive=false; break; }
        let winIdx = findWinningMoveSim(simBoard, AI);
        if(winIdx !== -1){
          simBoard[winIdx] = AI;
          simMoveHistory.push({state: curState, action: winIdx, nextState: simBoard.join('')});
        } else {
          let blockIdx = findWinningMoveSim(simBoard, PLAYER);
          if(blockIdx !== -1){
            simBoard[blockIdx] = AI;
            simMoveHistory.push({state: curState, action: blockIdx, nextState: simBoard.join('')});
          } else {
            if(!qTable[curState]) qTable[curState] = {};
            avail.forEach(a=>{ if(qTable[curState][a] === undefined) qTable[curState][a] = 0.0; });
            const safeAvail = avail.filter(a => !wouldGiveWin(simBoard, a, PLAYER));
            let chosenAvail = safeAvail.length > 0 ? safeAvail : avail;
            let chosen;
            if(Math.random() < EPSILON) chosen = chosenAvail[Math.floor(Math.random()*chosenAvail.length)];
            else {
              let maxQ = -Infinity, best=[];
              chosenAvail.forEach(a=>{ const q = qTable[curState][a] ?? 0.0; if(q>maxQ){maxQ=q;best=[a];} else if(q===maxQ){best.push(a);} });
              chosen = best.length ? best[Math.floor(Math.random()*best.length)] : chosenAvail[Math.floor(Math.random()*chosenAvail.length)];
            }
            simBoard[chosen] = AI;
            simMoveHistory.push({state: curState, action: chosen, nextState: simBoard.join('')});
          }
        }
        const res = checkWinner(simBoard);
        if(res.winner){
          applySimUpdates(simMoveHistory, res.winner === AI ? 1 : (res.winner === PLAYER ? -1 : 0.1));
          simActive=false; break;
        }
        simPlayerTurn = true;
      }
    }
    resolve();
  });
}

function applySimUpdates(simMoveHistory, finalReward){
  let reward = finalReward === 1 ? 1 : finalReward === -1 ? -1 : 0.1;
  for(let i=simMoveHistory.length-1;i>=0;i--){
    const {state, action, nextState} = simMoveHistory[i];
    if(!qTable[state]) qTable[state] = {};
    if(qTable[state][action] === undefined) qTable[state][action] = 0.0;
    const currentQ = qTable[state][action];
    let maxNextQ = 0;
    if(qTable[nextState]){ const vals = Object.values(qTable[nextState]); if(vals.length) maxNextQ = Math.max(...vals); }
    const target = reward + (DISCOUNT * maxNextQ);
    const newQ = currentQ + (LEARNING_RATE * (target - currentQ));
    qTable[state][action] = newQ;
    reward = 0;
  }
}

function checkWinner(board){
  const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
  for(const [a,b,c] of lines){
    if(board[a] !== '_' && board[a] === board[b] && board[b] === board[c]) return {winner: board[a], indices:[a,b,c]};
  }
  if(board.every(cell => cell !== '_')) return {winner:'draw', indices:[]};
  return {winner:null, indices:[]};
}

function resizeCanvas(){ particleCanvas.width = window.innerWidth; particleCanvas.height = window.innerHeight; }
function startParticles(){
  particles=[]; for(let i=0;i<80;i++){ particles.push({ x: window.innerWidth/2 + (Math.random()-0.5)*200, y: window.innerHeight/2 + (Math.random()-0.5)*120, vx:(Math.random()-0.5)*6, vy:-Math.random()*6 - 1, life:Math.random()*80+40, size:Math.random()*4+2, color:`rgba(${Math.floor(70+Math.random()*185)},${Math.floor(120+Math.random()*135)},255,1)` }); }
  requestAnimationFrame(particleLoop);
  setTimeout(()=>{ particles=[]; pcCtx.clearRect(0,0,particleCanvas.width, particleCanvas.height); }, 2400);
}
function particleLoop(){
  pcCtx.clearRect(0,0,particleCanvas.width, particleCanvas.height);
  for(const p of particles){
    p.x += p.vx; p.y += p.vy; p.vy += 0.12; p.life -= 1;
    pcCtx.beginPath(); pcCtx.arc(p.x,p.y,p.size,0,Math.PI*2); pcCtx.fillStyle = p.color; pcCtx.fill();
  }
  particles = particles.filter(p=>p.life>0);
  if(particles.length) requestAnimationFrame(particleLoop);
}

window.addEventListener('keydown', e=>{ if(e.key.toLowerCase()==='r'){ newRound(); hideResult(); } });
updateUI();
</script>
</body>
</html>
